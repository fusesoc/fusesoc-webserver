{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "FuseSoC-PD Additional Core File Validation",
  "description": "Extra validation for FuseSoC core files before publishing to FuseSoC-PD.",
  "properties": {
    "CAPI=2": {
      "enum": [null, ""],
      "description": "Must be present and set to null or an empty string"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_\\-]+:[a-zA-Z0-9_\\-]*:[a-zA-Z0-9_\\-]+:[0-9]+\\.[0-9]+\\.[0-9]+(-[0-9A-Za-z\\-\\.]+)?$",
      "description": "VLNV identifier: vendor:library:name:version (version may have pre-release tag)"
    },
    "description": {
      "type": "string",
      "description": "Short description of the core.",
      "minLength": 10
    },
    "license": {
      "type": "string",
      "description": "FuseSoC-PD only allows SPDX license identifier. See https://spdx.org/licenses/ for valid values."
    },
    "provider": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^github$"
        },
        "version": {
          "anyOf": [
            { "type": "string", "pattern": "^[a-fA-F0-9]{40}$" },
            { "type": "string", "pattern": "^[^\\s]+$" }
          ]
        }
      },
      "required": ["name", "version"],
      "not": {
        "required": ["patches"]
      }
    }
  },
  "required": ["CAPI=2", "name", "description", "provider"],
  "additionalProperties": true
}
